<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentCalc - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã | –†–∞—Å—á–µ—Ç ROI –æ–Ω–ª–∞–π–Ω</title>
    <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã. –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –≤–∞–ª–æ–≤—É—é –∏ —á–∏—Å—Ç—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã –∑–∞ 30 —Å–µ–∫—É–Ω–¥. –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π.">
    <meta name="keywords" content="–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞—Ä–µ–Ω–¥—ã, —Ä–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–∞ –æ—Ç –∞—Ä–µ–Ω–¥—ã, ROI –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã, –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏">
    <meta name="theme-color" content="#10b981">
    <meta property="og:title" content="RentCalc - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã">
    <meta property="og:description" content="–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ ROI –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã –∑–∞ 30 —Å–µ–∫—É–Ω–¥">
    <meta property="og:type" content="website">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --secondary: #6366f1;
            --accent: #f59e0b;
            --danger: #ef4444;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f9fafb;
            --bg-white: #ffffff;
            --border: #e5e7eb;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
        }

        [data-theme="dark"] {
            --text-dark: #f3f4f6;
            --text-light: #d1d5db;
            --bg-light: #1f2937;
            --bg-white: #111827;
            --border: #374151;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-white) 100%);
            color: var(--text-dark);
            line-height: 1.6;
            transition: background 0.3s ease;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-content h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .header-content p {
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .theme-toggle {
            background: var(--bg-white);
            border: 2px solid var(--border);
            border-radius: 50px;
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            border-color: var(--primary);
            transform: scale(1.05);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
            transform: translateY(-2px);
        }

        .card h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        input[type="number"],
        input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            background: var(--bg-light);
            color: var(--text-dark);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input[type="number"]:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
            background: var(--bg-white);
        }

        .currency {
            position: absolute;
            right: 12px;
            color: var(--text-light);
            font-weight: 600;
            pointer-events: none;
        }

        input[type="number"] {
            padding-right: 32px;
        }

        .help-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            cursor: help;
            margin-left: 8px;
            position: relative;
        }

        .tooltip {
            display: none;
            position: absolute;
            background: var(--text-dark);
            color: white;
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            white-space: nowrap;
            z-index: 1000;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--text-dark);
        }

        .help-icon:hover .tooltip {
            display: block;
        }

        .buttons-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            flex: 1;
            min-width: 150px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--bg-light);
            color: var(--text-dark);
            border: 2px solid var(--border);
        }

        .btn-secondary:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(16, 185, 129, 0.05);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        @media (max-width: 600px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        .result-item {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(99, 102, 241, 0.05) 100%);
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid var(--primary);
        }

        .result-label {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 6px;
            font-weight: 500;
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .result-value.warning {
            color: var(--warning);
        }

        .result-value.error {
            color: var(--error);
        }

        .result-value.info {
            color: var(--secondary);
        }

        .history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: var(--bg-light);
        }

        .history-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-item:hover {
            background: rgba(16, 185, 129, 0.1);
        }

        .history-item-text {
            font-size: 0.9rem;
            color: var(--text-dark);
        }

        .history-item-value {
            font-weight: 700;
            color: var(--primary);
        }

        .history-delete {
            background: none;
            border: none;
            color: var(--error);
            cursor: pointer;
            padding: 0;
            font-size: 1.2rem;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .history-delete:hover {
            transform: scale(1.2);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 600px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .comparison-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(16, 185, 129, 0.05) 100%);
            padding: 16px;
            border-radius: 12px;
            border: 2px solid var(--border);
        }

        .comparison-title {
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-dark);
        }

        .pie-chart-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 20px auto;
        }

        .no-data {
            text-align: center;
            padding: 30px;
            color: var(--text-light);
            font-style: italic;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-weight: 500;
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            border-left: 4px solid var(--warning);
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border-left: 4px solid var(--success);
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid var(--border);
            color: var(--text-light);
            font-size: 0.9rem;
        }

        @media (max-width: 600px) {
            .header-content h1 {
                font-size: 1.8rem;
            }

            header {
                margin-bottom: 30px;
            }

            .card {
                padding: 20px;
            }

            .main-grid {
                gap: 20px;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>üè† RentCalc</h1>
                <p>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã</p>
            </div>
            <button class="theme-toggle" onclick="toggleTheme()">
                <span id="theme-icon">üåô</span>
            </button>
        </header>

        <div class="main-grid">
            <!-- –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –§–û–†–ú–ê –í–í–û–î–ê -->
            <div class="card">
                <h2>üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á–µ—Ç–∞</h2>

                <div class="form-group">
                    <label>
                        –¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏
                        <span class="help-icon">
                            ?
                            <span class="tooltip">–ü–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="propertyPrice" placeholder="1500000" step="10000" value="1500000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞
                        <span class="help-icon">
                            ?
                            <span class="tooltip">–°—É–º–º–∞, –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—É—á–∞–µ—à—å –æ—Ç –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="monthlyRent" placeholder="30000" step="1000" value="30000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–µ–º (–≤ –º–µ—Å—è—Ü)
                        <span class="help-icon">
                            ?
                            <span class="tooltip">–í–∑–Ω–æ—Å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–æ–º–∞, –ª–∏—Ñ—Ç, –æ—Ö—Ä–∞–Ω—É</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="managementCost" placeholder="3000" step="100" value="3000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        –†–µ–º–æ–Ω—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (–≤ –º–µ—Å—è—Ü)
                        <span class="help-icon">
                            ?
                            <span class="tooltip">–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–º–æ–Ω—Ç, –∑–∞–º–µ–Ω–∞ –º–µ–±–µ–ª–∏</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="repairCost" placeholder="2000" step="100" value="2000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        –ù–∞–ª–æ–≥–∏ (–≤ –º–µ—Å—è—Ü)
                        <span class="help-icon">
                            ?
                            <span class="tooltip">–ù–î–§–õ –∏ –ø—Ä–æ—á–∏–µ –Ω–∞–ª–æ–≥–∏</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="taxesCost" placeholder="1500" step="100" value="1500">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        –°—Ç—Ä–∞—Ö–æ–≤–∫–∞ (–≤ –º–µ—Å—è—Ü)
                        <span class="help-icon">
                            ?
                            <span class="tooltip">–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ –∏–º—É—â–µ—Å—Ç–≤–∞ –æ—Ç —Ä–∏—Å–∫–æ–≤</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="insuranceCost" placeholder="500" step="50" value="500">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ (–≤ –º–µ—Å—è—Ü)
                        <span class="help-icon">
                            ?
                            <span class="tooltip">–ï—Å–ª–∏ —Ç—ã –ø–ª–∞—Ç–∏—à—å –≤–º–µ—Å—Ç–æ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="utilitiesCost" placeholder="0" step="100" value="0">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="buttons-group">
                    <button class="btn-primary" onclick="calculateOnButtonClick()">üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                    <button class="btn-secondary" onclick="clearForm()">üîÑ –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>

                <p style="margin-top: 12px; font-size: 0.85rem; color: var(--text-light); text-align: center;">
                    üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –Ω–∞–∂–º–∏ Enter –∏–ª–∏ –∫–Ω–æ–ø–∫—É "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"
                </p>
            </div>

            <!-- –ü–†–ê–í–ê–Ø –ö–û–õ–û–ù–ö–ê: –†–ï–ó–£–õ–¨–¢–ê–¢–´ -->
            <div class="card">
                <h2>üìà –†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>

                <div id="results-container">
                    <div class="no-data">
                        –í–≤–µ–¥–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞–∂–º–∏ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"
                    </div>
                </div>

                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border);">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">üìö –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤</h3>
                    <div id="history-container" class="history-list">
                        <div class="no-data" style="padding: 16px;">
                            –†–∞—Å—á—ë—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–†–ê–í–ù–ï–ù–ò–ï -->
        <div class="card">
            <h2>üîÄ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</h2>
            <div id="comparison-container">
                <div class="no-data">
                    –°–æ—Ö—Ä–∞–Ω–∏ –º–∏–Ω–∏–º—É–º 2 —Ä–∞—Å—á—ë—Ç–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
                </div>
            </div>
            <div class="buttons-group" style="margin-top: 20px;">
                <button class="btn-secondary" onclick="clearComparison()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ</button>
            </div>
        </div>

        <!-- –ë–õ–û–ì –°–ï–ö–¶–ò–Ø -->
        <div class="card" style="margin-top: 30px;">
            <h2>üìö –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã?</h2>
            
            <div style="color: var(--text-dark); line-height: 1.8; font-size: 0.95rem;">
                <p style="margin-bottom: 16px;">
                    <strong>–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ ROI –ø—Ä–∏ –∞—Ä–µ–Ω–¥–µ:</strong>
                </p>
                <p style="background: rgba(16, 185, 129, 0.1); padding: 16px; border-radius: 8px; margin-bottom: 16px; font-weight: 600; text-align: center;">
                    (–ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥ –≤ –≥–æ–¥ / –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏) √ó 100%
                </p>
                
                <p style="margin-bottom: 16px;">
                    <strong>–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:</strong><br>
                    –ï—Å–ª–∏ –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å—Ç–æ–∏—Ç <strong>1,500,000 ‚ÇΩ</strong> –∏ –ø—Ä–∏–Ω–æ—Å–∏—Ç <strong>100,000 ‚ÇΩ</strong> —á–∏—Å—Ç–æ–≥–æ –¥–æ—Ö–æ–¥–∞ –≤ –≥–æ–¥, —Ç–æ:<br>
                    <strong style="color: var(--primary);">ROI = (100,000 / 1,500,000) √ó 100% = 6.67%</strong>
                </p>
                
                <p style="margin-bottom: 16px;">
                    <strong style="color: var(--success);">‚úÖ –≠—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é!</strong> –°—Ä–µ–¥–Ω—è—è –ø–æ –†–æ—Å—Å–∏–∏ 4-8%.
                </p>
            </div>
        </div>

        <!-- –§–û–†–ú–ê –û–ë–†–ê–¢–ù–û–ô –°–í–Ø–ó–ò -->
        <div class="card" style="margin-top: 30px;">
            <h2>üí¨ –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h2>
            <form action="https://formsubmit.co/info@rentcalc.ru" method="POST" style="display: flex; flex-direction: column;">
                <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" required style="margin-bottom: 1em; padding: 0.5em; font-size: 1em; border: 1px solid var(--border); border-radius: 4px; background: var(--bg-light); color: var(--text-dark);">
                <input type="email" name="email" placeholder="–í–∞—à email" required style="margin-bottom: 1em; padding: 0.5em; font-size: 1em; border: 1px solid var(--border); border-radius: 4px; background: var(--bg-light); color: var(--text-dark);">
                <textarea name="message" placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" required rows="5" style="margin-bottom: 1em; padding: 0.5em; font-size: 1em; border: 1px solid var(--border); border-radius: 4px; background: var(--bg-light); color: var(--text-dark);"></textarea>
                <input type="hidden" name="_captcha" value="false">
                <button type="submit" style="padding: 0.75em; font-size: 1em; background-color: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>

        <footer class="footer">
            <p>RentCalc ¬© 2024 | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã | –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è</p>
        </footer>
    </div>

    <script>
        // === THEME TOGGLE ===
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.getAttribute('data-theme') === 'dark';
            const newTheme = isDark ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            const icon = document.getElementById('theme-icon');
            icon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        // === CALCULATION LOGIC ===
        let calculations = [];
        let comparisonItems = [];

        function getFormValues() {
            return {
                propertyPrice: parseFloat(document.getElementById('propertyPrice').value) || 0,
                monthlyRent: parseFloat(document.getElementById('monthlyRent').value) || 0,
                managementCost: parseFloat(document.getElementById('managementCost').value) || 0,
                repairCost: parseFloat(document.getElementById('repairCost').value) || 0,
                taxesCost: parseFloat(document.getElementById('taxesCost').value) || 0,
                insuranceCost: parseFloat(document.getElementById('insuranceCost').value) || 0,
                utilitiesCost: parseFloat(document.getElementById('utilitiesCost').value) || 0,
            };
        }

        function calculate() {
            const values = getFormValues();
            
            if (values.propertyPrice <= 0 || values.monthlyRent <= 0) {
                alert('‚ö†Ô∏è –£–∫–∞–∂–∏ —Ü–µ–Ω—É –∏ –∞—Ä–µ–Ω–¥—É (–æ–±–∞ –ø–æ–ª—è > 0)');
                return null;
            }

            const totalMonthlyExpenses = 
                values.managementCost + 
                values.repairCost + 
                values.taxesCost + 
                values.insuranceCost + 
                values.utilitiesCost;

            const monthlyNetIncome = values.monthlyRent - totalMonthlyExpenses;
            const yearlyGrossIncome = values.monthlyRent * 12;
            const yearlyNetIncome = monthlyNetIncome * 12;
            const yearlyExpenses = totalMonthlyExpenses * 12;

            const grossROI = (yearlyGrossIncome / values.propertyPrice) * 100;
            const netROI = (yearlyNetIncome / values.propertyPrice) * 100;
            const paybackPeriod = values.propertyPrice / yearlyNetIncome;

            return {
                ...values,
                totalMonthlyExpenses,
                monthlyNetIncome,
                yearlyGrossIncome,
                yearlyNetIncome,
                yearlyExpenses,
                grossROI,
                netROI,
                paybackPeriod,
                timestamp: new Date().toLocaleString('ru-RU'),
                id: Date.now()
            };
        }

        function displayResults(calc) {
            if (!calc) return;

            const resultsHTML = `
                <div class="alert alert-success">
                    ‚úÖ –†–∞—Å—á—ë—Ç –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ
                </div>

                <div class="results-grid">
                    <div class="result-item">
                        <div class="result-label">–í–∞–ª–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</div>
                        <div class="result-value">${calc.grossROI.toFixed(2)}%</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">–ß–∏—Å—Ç–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å</div>
                        <div class="result-value ${calc.netROI < 0 ? 'error' : 'info'}">${calc.netROI.toFixed(2)}%</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">–ì–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥ (–≤–∞–ª–æ–≤–æ–π)</div>
                        <div class="result-value" style="color: var(--warning);">${Math.round(calc.yearlyGrossIncome).toLocaleString('ru-RU')} ‚ÇΩ</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">–ì–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥ (—á–∏—Å—Ç—ã–π)</div>
                        <div class="result-value ${calc.yearlyNetIncome < 0 ? 'error' : ''}">${Math.round(calc.yearlyNetIncome).toLocaleString('ru-RU')} ‚ÇΩ</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π —á–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥</div>
                        <div class="result-value ${calc.monthlyNetIncome < 0 ? 'error' : ''}">${Math.round(calc.monthlyNetIncome).toLocaleString('ru-RU')} ‚ÇΩ</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">–°—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏</div>
                        <div class="result-value ${calc.paybackPeriod > 30 ? 'warning' : 'info'}">${calc.paybackPeriod.toFixed(1)} –ª–µ—Ç</div>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 16px; background: rgba(16, 185, 129, 0.05); border-radius: 8px;">
                    <p style="font-size: 0.9rem; margin-bottom: 8px;"><strong>üìä –†–∞—Å—Ö–æ–¥—ã –≤ –º–µ—Å—è—Ü:</strong></p>
                    <div style="font-size: 0.85rem; color: var(--text-light); line-height: 1.8;">
                        –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ${Math.round(calc.managementCost).toLocaleString('ru-RU')} ‚ÇΩ | 
                        –†–µ–º–æ–Ω—Ç: ${Math.round(calc.repairCost).toLocaleString('ru-RU')} ‚ÇΩ | 
                        –ù–∞–ª–æ–≥–∏: ${Math.round(calc.taxesCost).toLocaleString('ru-RU')} ‚ÇΩ | 
                        –°—Ç—Ä–∞—Ö–æ–≤–∫–∞: ${Math.round(calc.insuranceCost).toLocaleString('ru-RU')} ‚ÇΩ
                    </div>
                    <div style="font-size: 0.85rem; color: var(--text-light); margin-top: 8px;">
                        <strong>–ò—Ç–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–æ–≤:</strong> ${Math.round(calc.totalMonthlyExpenses).toLocaleString('ru-RU')} ‚ÇΩ / –º–µ—Å—è—Ü
                    </div>
                </div>

                <div style="margin-top: 16px;">
                    <button class="btn-secondary" onclick="addToComparison(${calc.id})" style="width: 100%;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ</button>
                </div>
            `;

            document.getElementById('results-container').innerHTML = resultsHTML;
        }

        function calculateOnButtonClick() {
            const calc = calculate();
            if (calc) {
                displayResults(calc);
                addToHistory(calc);
            }
        }

        // === HISTORY MANAGEMENT ===
        function addToHistory(calc) {
            calculations.unshift(calc);
            if (calculations.length > 20) calculations.pop();
            localStorage.setItem('rentcalc_history', JSON.stringify(calculations));
            displayHistory();
        }

        function displayHistory() {
            if (calculations.length === 0) {
                document.getElementById('history-container').innerHTML = 
                    '<div class="no-data" style="padding: 16px;">–†–∞—Å—á—ë—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>';
                return;
            }

            const historyHTML = calculations.map(calc => `
                <div class="history-item" onclick="loadFromHistory(${calc.id})">
                    <div class="history-item-text">
                        üè† ${Math.round(calc.propertyPrice/1000000)}–ú ‚ÇΩ | üí∞ ${Math.round(calc.monthlyRent)}‚ÇΩ/–º–µ—Å | ${calc.netROI.toFixed(1)}% ROI
                        <br><small style="opacity: 0.7;">${calc.timestamp}</small>
                    </div>
                    <button class="history-delete" onclick="deleteFromHistory(${calc.id}, event)">‚úï</button>
                </div>
            `).join('');

            document.getElementById('history-container').innerHTML = historyHTML;
        }

        function loadFromHistory(id) {
            const calc = calculations.find(c => c.id === id);
            if (calc) {
                document.getElementById('propertyPrice').value = calc.propertyPrice;
                document.getElementById('monthlyRent').value = calc.monthlyRent;
                document.getElementById('managementCost').value = calc.managementCost;
                document.getElementById('repairCost').value = calc.repairCost;
                document.getElementById('taxesCost').value = calc.taxesCost;
                document.getElementById('insuranceCost').value = calc.insuranceCost;
                document.getElementById('utilitiesCost').value = calc.utilitiesCost;
                displayResults(calc);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function deleteFromHistory(id, event) {
            event.stopPropagation();
            calculations = calculations.filter(c => c.id !== id);
            localStorage.setItem('rentcalc_history', JSON.stringify(calculations));
            displayHistory();
        }

        function clearForm() {
            document.getElementById('propertyPrice').value = '1500000';
            document.getElementById('monthlyRent').value = '30000';
            document.getElementById('managementCost').value = '3000';
            document.getElementById('repairCost').value = '2000';
            document.getElementById('taxesCost').value = '1500';
            document.getElementById('insuranceCost').value = '500';
            document.getElementById('utilitiesCost').value = '0';
            document.getElementById('results-container').innerHTML = 
                '<div class="no-data">–í–≤–µ–¥–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞–∂–º–∏ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"</div>';
        }

        // === COMPARISON ===
        function addToComparison(id) {
            const calc = calculations.find(c => c.id === id);
            if (calc && !comparisonItems.find(c => c.id === id)) {
                comparisonItems.push(calc);
                if (comparisonItems.length > 3) comparisonItems.shift();
                localStorage.setItem('rentcalc_comparison', JSON.stringify(comparisonItems));
                displayComparison();
                alert('‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ');
            }
        }

        function displayComparison() {
            if (comparisonItems.length < 2) {
                document.getElementById('comparison-container').innerHTML = 
                    '<div class="no-data">–°–æ—Ö—Ä–∞–Ω–∏ –º–∏–Ω–∏–º—É–º 2 —Ä–∞—Å—á—ë—Ç–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</div>';
                return;
            }

            const comparisonHTML = `
                <div class="comparison-grid">
                    ${comparisonItems.map(calc => `
                        <div class="comparison-card">
                            <div class="comparison-title">
                                üè† ${Math.round(calc.propertyPrice/1000000)}–ú ‚ÇΩ
                            </div>
                            <div style="font-size: 0.9rem; line-height: 1.8;">
                                <p><strong>–ê—Ä–µ–Ω–¥–∞:</strong> ${Math.round(calc.monthlyRent).toLocaleString('ru-RU')} ‚ÇΩ/–º–µ—Å</p>
                                <p><strong>–†–∞—Å—Ö–æ–¥—ã:</strong> ${Math.round(calc.totalMonthlyExpenses).toLocaleString('ru-RU')} ‚ÇΩ/–º–µ—Å</p>
                                <p><strong>–ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥:</strong> ${Math.round(calc.monthlyNetIncome).toLocaleString('ru-RU')} ‚ÇΩ/–º–µ—Å</p>
                                <p style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border);">
                                    <strong style="color: var(--primary);">ROI: ${calc.netROI.toFixed(2)}%</strong>
                                </p>
                                <p style="font-size: 0.85rem; color: var(--text-light);">
                                    –û–∫—É–ø–∞–µ–º–æ—Å—Ç—å: ${calc.paybackPeriod.toFixed(1)} –ª–µ—Ç
                                </p>
                            </div>
                            <button class="btn-secondary" style="width: 100%; margin-top: 12px;" onclick="removeFromComparison(${calc.id})">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    `).join('')}
                </div>
            `;

            document.getElementById('comparison-container').innerHTML = comparisonHTML;
        }

        function removeFromComparison(id) {
            comparisonItems = comparisonItems.filter(c => c.id !== id);
            localStorage.setItem('rentcalc_comparison', JSON.stringify(comparisonItems));
            displayComparison();
        }

        function clearComparison() {
            comparisonItems = [];
            localStorage.removeItem('rentcalc_comparison');
            displayComparison();
        }

        // === KEYBOARD EVENTS ===
        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    calculateOnButtonClick();
                }
            });

            // Load saved data
            const savedHistory = localStorage.getItem('rentcalc_history');
            if (savedHistory) {
                calculations = JSON.parse(savedHistory);
                displayHistory();
            }

            const savedComparison = localStorage.getItem('rentcalc_comparison');
            if (savedComparison) {
                comparisonItems = JSON.parse(savedComparison);
                displayComparison();
            }
        });

        // Analytics helper (optional - remove if not needed)
        function trackEvent(eventName) {
            // Can be replaced with actual analytics later
            console.log('Event:', eventName);
        }
    </script>
</body>
</html>
