<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RentCalc - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã | Rental Income Calculator</title>
    <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã –∏ ROI —Ä–∞—Å—á—ë—Ç. Calculate rental ROI instantly.">
    <meta name="keywords" content="–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞—Ä–µ–Ω–¥—ã, ROI, rental income calculator">
    <meta name="theme-color" content="#1E3A8A">
    <meta property="og:title" content="RentCalc - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã">
    <meta property="og:description" content="–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ ROI –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã –∑–∞ 30 —Å–µ–∫—É–Ω–¥">
    <meta property="og:type" content="website">
    
    <link rel="alternate" hreflang="ru" href="https://rentcalc.ru/" />
    <link rel="alternate" hreflang="en" href="https://rentcalc.ru/en/" />
    <link rel="alternate" hreflang="x-default" href="https://rentcalc.ru/" />
    
    <script type="text/javascript" src="https://gc.kis.v2.scr.kaspersky-labs.com/FD126C42-EBFA-4E12-B309-BB3FDD723AC1/main.js?attr=G3ArHkIxLXeqPMOvu6G00VEGT31zEKBFjlGlViUPxqzBupM19devIeWDbdvdqjhffDUnw7Lk2esaH9AIDCv-Xic7xSyEz1C4pb2tuqysmFx0H-XBdM6mtsUVSe2gqwLm5kSfI-RtGUxOeJ7B19JodTiJW6XCqH0PTbc7Aeo23VW-iklb3IFRPl-Gv5tqC57pMI6oqnHm15ebgj4hUJpKzskGACzT5GZNR1IDzNi8L2H6EOR1-A3a-YBdTH28Njpego8bcYgNXdpHG1lv__ug2Jqk2DkMtt_CdfrirkIpL0qlQ9e92GrlSRptnOPba4fRUl5SJYAAO8MHC_5ybJNgGh_WPIUOQbEZmS9jj433JuclXSDMTCMZ9vWcFT25Jnwq3DT9gpulXCV6NyHsZr0Z7_cQkbWPJteT7Bg2AdupHl61SnX-j6c-QpQKbVFB3jpPMNk8zLSNiNgV5FfDvqbEU9Eb8FC2dZ6VBJE8w4uWJ1Fd5RBg0sLqBhiq13WDs-8umIc-C4u00h2cTyVN9kfvKI5gOBbkMeXQ0ISKo5tkYp2FiiNhQoEqRj73MuTfSHmgdKJH89L36RWoMuHej2xK_VrBKwMf7zhSG1LRIJ5DWN_Puwb41plFZy3i-psOiw1HIAvaBb58diVkDITlRaTCN63V0zGqF-DSzxPVze6auhtynKKG4N72Lpq_kEMhx-_ohhPjv_n9WthT0KW8QgeHBs52sxnVR9Em-eTl9FYLN2m3Cpx_q0lQQaU-ymZhtvLFPSsYwHNeIG61nS6fl-c1gw9QO14gXMY8rpJUaV-Mm1vaCXZ85tNwh-dLFKbRlgssh3a6Cyi5pF-wlGetz_RQEQP8JXUHWEwf2L8cyxiz4zCRJOnfy_OR-K8Y7S5tQx3CQpUMTf7ZCyQ_agDVw4DYDT9dacPFuWTOuEI5LcducY-waaEe15P-n-sagU-amtbbU5sbSc4gVUrK-I5AqFOH5P-yg9BG6kK4-Ujo0DHqvWjyr91BSyF9rz91EIQbLpyFyuJjRMNHaKLF0It2odyl7qHlliE2oX68FsnIQAC2Wsq_4m2Ikul3XLfwmoVbs_Y3T9GBMEphvdCNSGiIxToBs-8jyUcTp1nSG05GLPFgN87Ldox0Lm_tq7hpeq23gNccntaEQUA0wiYRjX8yAiXqrFSrxcf1ojVnC3eXbw-QiyaOG9YZz_fKu-DHYT2zzG4fLO-t0FUEH2r46G662-ANsakdMN3lXNuuvhHF4lF96X0FSJYdxPz4kgr1zR8p_mfXL5VbUjRzd710qtErKDfQVqhAjk943sN2E1nAD6KnWKZDcJ9n-9wCwzA9f3J5GjWcQgGZqEIepiG7lIh0GrXxi1bAOv8qC2fGPo8qfmS56KP0W6cZXWavviKddPyn-z_r6yy_YUMn-GbWSMsPFeHsyvmNBdleN7obVgSwoeadyfX1lNJcBYsQ8TnqhgQuOyuY0NaEAbHWyyOvmc-TNiTyT6bXDTOl9hOK-fY6PzUiI5-KzK-Hr6t8QXuWjfe5NmBsuQyLmi5Y-TpmXq_Tpvj_YasryVGC-TpN6RPTN1NHJrBG102IezUSC3mFXrUB5fs1L73TEoh3g0atOJv69ioA6_FtmHbXzHQZsAr3puZl0LAtSxKCx0nR6UQXUpcc6S5jOCwfn-HvtynjwsZOxAh6gART77IMvnieQqURTLXj5bdITnOA1v5_uJuzUkcA08RlklkD9TggJJPfEcTmf5V4_bUwHHMucO5g1fMPNRKK5CFzKOSZK05NLpt_WKB7Puw59y_jA3kf73lruNwnohfghEB-C8GYCdAG4snEiBbgYnFKe-IFOjwfdni0XRPsS4BMMpidRzT1rGEKjYJVx3Oy4QNc752i_bgifC1SKwerC66nhbNWMPD9vURJoQ38wYO8_GVWSWt0UXmhHbyeU5YEh0zOsOk8Aet5xMu6X6J0TBAF8BMcra8Ka9s6YZuqfTWpl_O6lRIccMmgr9WAAnaup7c3yc581V5wuzk71ncCR-mGx3QwnPOvy0Iw_1_Dtf_Q6aecYo0ugTMgEtg3SatkGTU_TbeqnePNSb1pR2FpOnCzmaMAgMUvuwhZkLlx3ojd5KHhhTallJaqG8zzHJF5D5US2OuFbbwWI-ycWQtvDL81rZKQZr9EC2nkUytYkNGQA_GidEGI1eSTD1k6YaxyNegxbQZ8KgdMQhiNXXnrFlhbntzb5jE3syck9lhdc0Jt" charset="UTF-8"></script><style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #1E3A8A 0%, #7C3AED 100%);
            --secondary-gradient: linear-gradient(135deg, #14B8A6 0%, #06B6D4 100%);
            --accent-gradient: linear-gradient(135deg, #FF6B6B 0%, #FFA94D 100%);
            --success: #10B981;
            --warning: #F59E0B;
            --danger: #FF6B6B;
            --text-primary: #F3F4F6;
            --text-secondary: #D1D5DB;
            --bg-dark: #0F172A;
            --bg-card: rgba(255, 255, 255, 0.08);
            --border-dark: rgba(255, 255, 255, 0.12);
        }

        [data-theme="light"] {
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --bg-dark: #F9FAFB;
            --bg-card: rgba(255, 255, 255, 0.95);
            --border-dark: #E5E7EB;
        }

        html {
            font-size: 16px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background 0.3s ease;
            min-height: 100vh;
            padding: 20px;
        }

        [data-theme="light"] body {
            background: linear-gradient(135deg, #F9FAFB 0%, #F3F4F6 100%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .header-content h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .header-content p {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .header-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .language-toggle {
            background: var(--bg-card);
            border: 1px solid var(--border-dark);
            border-radius: 50px;
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .language-toggle:hover {
            border-color: var(--success);
            transform: scale(1.05);
        }

        .language-toggle.active {
            background: var(--success);
            color: white;
        }

        .theme-toggle {
            background: var(--bg-card);
            border: 1px solid var(--border-dark);
            border-radius: 50px;
            padding: 8px 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .theme-toggle:hover {
            border-color: var(--primary-gradient);
            transform: scale(1.05);
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 900px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-dark);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .card:hover {
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
            transform: translateY(-4px);
        }

        .card h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        input[type="number"],
        input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-dark);
            border-radius: 10px;
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.2);
            color: var(--text-primary);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        [data-theme="light"] input[type="number"],
        [data-theme="light"] input[type="text"] {
            background: rgba(0, 0, 0, 0.05);
        }

        input[type="number"]:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: var(--success);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);
        }

        .currency {
            position: absolute;
            right: 12px;
            color: var(--text-secondary);
            font-weight: 600;
            pointer-events: none;
        }

        input[type="number"] {
            padding-right: 32px;
        }

        .help-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background: var(--success);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            cursor: help;
            margin-left: 8px;
            position: relative;
        }

        .tooltip {
            display: none;
            position: absolute;
            background: var(--text-primary);
            color: var(--bg-dark);
            padding: 10px 12px;
            border-radius: 8px;
            font-size: 0.85rem;
            white-space: nowrap;
            z-index: 1000;
            bottom: 130%;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--text-primary);
        }

        .help-icon:hover .tooltip {
            display: block;
        }

        .buttons-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
            flex: 1;
            min-width: 150px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-dark);
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            border-color: var(--success);
            color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        @media (max-width: 600px) {
            .results-grid {
                grid-template-columns: 1fr;
            }
        }

        .result-item {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(99, 102, 241, 0.1) 100%);
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid var(--success);
        }

        .result-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 6px;
            font-weight: 500;
        }

        .result-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--success);
        }

        .result-value.warning {
            color: var(--warning);
        }

        .result-value.error {
            color: var(--danger);
        }

        .history-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border-dark);
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.1);
        }

        .history-item {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-dark);
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item:hover {
            background: rgba(16, 185, 129, 0.15);
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 600px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .comparison-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--border-dark);
        }

        .no-data {
            text-align: center;
            padding: 30px;
            color: var(--text-secondary);
            font-style: italic;
        }

        .alert {
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border-left: 4px solid var(--success);
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid var(--border-dark);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        @media (max-width: 600px) {
            .header-content h1 {
                font-size: 1.8rem;
            }

            header {
                margin-bottom: 30px;
            }

            .card {
                padding: 20px;
            }

            .main-grid {
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>üè† RentCalc</h1>
                <p id="header-subtitle">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã</p>
            </div>
            <div class="header-controls">
                <div style="display: flex; gap: 8px;">
                    <button class="language-toggle active" id="lang-ru" onclick="setLanguage('ru')">üá∑üá∫ –†–£</button>
                    <button class="language-toggle" id="lang-en" onclick="setLanguage('en')">üá¨üáß EN</button>
                </div>
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="theme-icon">üåô</span>
                </button>
            </div>
        </header>

        <div class="main-grid">
            <!-- –§–û–†–ú–ê –í–í–û–î–ê -->
            <div class="card">
                <h2>üìä <span id="label-params">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á–µ—Ç–∞</span></h2>

                <div class="form-group">
                    <label>
                        <span id="label-price">–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</span>
                        <span class="help-icon">
                            ?
                            <span class="tooltip" id="tooltip-price">–ü–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="propertyPrice" placeholder="1500000" step="10000" value="1500000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <span id="label-rent">–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞</span>
                        <span class="help-icon">
                            ?
                            <span class="tooltip" id="tooltip-rent">–î–æ—Ö–æ–¥ –æ—Ç –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="monthlyRent" placeholder="30000" step="1000" value="30000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <span id="label-management">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–µ–º (–≤ –º–µ—Å—è—Ü)</span>
                        <span class="help-icon">
                            ?
                            <span class="tooltip" id="tooltip-management">–í–∑–Ω–æ—Å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="managementCost" placeholder="3000" step="100" value="3000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <span id="label-repair">–†–µ–º–æ–Ω—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (–≤ –º–µ—Å—è—Ü)</span>
                        <span class="help-icon">
                            ?
                            <span class="tooltip" id="tooltip-repair">–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–º–æ–Ω—Ç</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="repairCost" placeholder="2000" step="100" value="2000">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <span id="label-taxes">–ù–∞–ª–æ–≥–∏ (–≤ –º–µ—Å—è—Ü)</span>
                        <span class="help-icon">
                            ?
                            <span class="tooltip" id="tooltip-taxes">–ù–î–§–õ –∏ –ø—Ä–æ—á–∏–µ –Ω–∞–ª–æ–≥–∏</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="taxesCost" placeholder="1500" step="100" value="1500">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <span id="label-insurance">–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ (–≤ –º–µ—Å—è—Ü)</span>
                        <span class="help-icon">
                            ?
                            <span class="tooltip" id="tooltip-insurance">–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ –∏–º—É—â–µ—Å—Ç–≤–∞</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="insuranceCost" placeholder="500" step="50" value="500">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <span id="label-utilities">–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ (–≤ –º–µ—Å—è—Ü)</span>
                        <span class="help-icon">
                            ?
                            <span class="tooltip" id="tooltip-utilities">–ï—Å–ª–∏ —Ç—ã –ø–ª–∞—Ç–∏—à—å –≤–º–µ—Å—Ç–æ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞</span>
                        </span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="utilitiesCost" placeholder="0" step="100" value="0">
                        <span class="currency">‚ÇΩ</span>
                    </div>
                </div>

                <div class="buttons-group">
                    <button class="btn-primary" onclick="calculateOnButtonClick()" id="btn-calculate">üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                    <button class="btn-secondary" onclick="clearForm()" id="btn-clear">üîÑ –û—á–∏—Å—Ç–∏—Ç—å</button>
                </div>
            </div>

            <!-- –†–ï–ó–£–õ–¨–¢–ê–¢–´ -->
            <div class="card">
                <h2>üìà <span id="label-results">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</span></h2>

                <div id="results-container">
                    <div class="no-data" id="results-empty">–í–≤–µ–¥–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞–∂–º–∏ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"</div>
                </div>

                <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border-dark);">
                    <h3 style="margin-bottom: 16px; font-size: 1.1rem;">üìö <span id="label-history">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤</span></h3>
                    <div id="history-container" class="history-list">
                        <div class="no-data" style="padding: 16px;" id="history-empty">–†–∞—Å—á—ë—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°–†–ê–í–ù–ï–ù–ò–ï -->
        <div class="card">
            <h2>üîÄ <span id="label-compare">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</span></h2>
            <div id="comparison-container">
                <div class="no-data" id="compare-empty">–°–æ—Ö—Ä–∞–Ω–∏ –º–∏–Ω–∏–º—É–º 2 —Ä–∞—Å—á—ë—Ç–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è</div>
            </div>
            <div class="buttons-group" style="margin-top: 20px;">
                <button class="btn-secondary" onclick="clearComparison()" id="btn-clear-compare">üóëÔ∏è <span id="label-clear-compare">–û—á–∏—Å—Ç–∏—Ç—å</span></button>
            </div>
        </div>

        <!-- –ë–õ–û–ì –°–ï–ö–¶–ò–Ø -->
        <div class="card" style="margin-top: 30px;">
            <h2>üìö <span id="label-blog-title">–ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã?</span></h2>
            
            <div style="color: var(--text-primary); line-height: 1.8; font-size: 0.95rem;">
                <p style="margin-bottom: 16px;">
                    <strong id="blog-formula">–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ ROI –ø—Ä–∏ –∞—Ä–µ–Ω–¥–µ:</strong>
                </p>
                <p style="background: rgba(16, 185, 129, 0.1); padding: 16px; border-radius: 8px; margin-bottom: 16px; font-weight: 600; text-align: center;">
                    <span id="blog-formula-text">(–ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥ –≤ –≥–æ–¥ / –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏) √ó 100%</span>
                </p>
                
                <p style="margin-bottom: 16px;">
                    <strong id="blog-example">–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:</strong><br>
                    <span id="blog-example-text">–ï—Å–ª–∏ –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å—Ç–æ–∏—Ç <strong>1,500,000 ‚ÇΩ</strong> –∏ –ø—Ä–∏–Ω–æ—Å–∏—Ç <strong>100,000 ‚ÇΩ</strong> —á–∏—Å—Ç–æ–≥–æ –¥–æ—Ö–æ–¥–∞ –≤ –≥–æ–¥, —Ç–æ:</span><br>
                    <strong style="color: var(--success);" id="blog-example-result">ROI = (100,000 / 1,500,000) √ó 100% = 6.67%</strong>
                </p>
                
                <p style="margin-bottom: 16px;">
                    <strong style="color: var(--success);" id="blog-good">‚úÖ –≠—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é!</strong> <span id="blog-average">–°—Ä–µ–¥–Ω—è—è –ø–æ –†–æ—Å—Å–∏–∏ 4-8%.</span>
                </p>
            </div>
        </div>

        <!-- –§–û–†–ú–ê –û–ë–†–ê–¢–ù–û–ô –°–í–Ø–ó–ò -->
        <div class="card" style="margin-top: 30px;">
            <h2>üí¨ <span id="label-feedback">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</span></h2>
            <form action="https://formsubmit.co/info@rentcalc.ru" method="POST" style="display: flex; flex-direction: column;">
                <input type="text" name="name" placeholder="–í–∞—à–µ –∏–º—è" id="placeholder-name" required style="margin-bottom: 1em; padding: 0.5em; font-size: 1em; border: 1px solid var(--border-dark); border-radius: 4px; background: rgba(0,0,0,0.2); color: var(--text-primary);">
                <input type="email" name="email" placeholder="–í–∞—à email" id="placeholder-email" required style="margin-bottom: 1em; padding: 0.5em; font-size: 1em; border: 1px solid var(--border-dark); border-radius: 4px; background: rgba(0,0,0,0.2); color: var(--text-primary);">
                <textarea name="message" placeholder="–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" id="placeholder-message" required rows="5" style="margin-bottom: 1em; padding: 0.5em; font-size: 1em; border: 1px solid var(--border-dark); border-radius: 4px; background: rgba(0,0,0,0.2); color: var(--text-primary);"></textarea>
                <input type="hidden" name="_captcha" value="false">
                <button type="submit" style="padding: 0.75em; font-size: 1em; background: var(--primary-gradient); color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600;" id="btn-submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
        </div>

        <footer class="footer">
            <p id="footer-text">RentCalc ¬© 2024 | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã | –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>
        </footer>
    </div>

    <script>
        // === TRANSLATIONS ===
        const translations = {
            ru: {
                'header-subtitle': '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã',
                'label-params': '–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á–µ—Ç–∞',
                'label-price': '–¶–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏',
                'tooltip-price': '–ü–æ–ª–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–≤–∞—Ä—Ç–∏—Ä—ã',
                'label-rent': '–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è –∞—Ä–µ–Ω–¥–∞',
                'tooltip-rent': '–î–æ—Ö–æ–¥ –æ—Ç –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞',
                'label-management': '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏–µ–º (–≤ –º–µ—Å—è—Ü)',
                'tooltip-management': '–í–∑–Ω–æ—Å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ',
                'label-repair': '–†–µ–º–æ–Ω—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ (–≤ –º–µ—Å—è—Ü)',
                'tooltip-repair': '–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–º–æ–Ω—Ç',
                'label-taxes': '–ù–∞–ª–æ–≥–∏ (–≤ –º–µ—Å—è—Ü)',
                'tooltip-taxes': '–ù–î–§–õ –∏ –ø—Ä–æ—á–∏–µ –Ω–∞–ª–æ–≥–∏',
                'label-insurance': '–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ (–≤ –º–µ—Å—è—Ü)',
                'tooltip-insurance': '–°—Ç—Ä–∞—Ö–æ–≤–∫–∞ –∏–º—É—â–µ—Å—Ç–≤–∞',
                'label-utilities': '–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ (–≤ –º–µ—Å—è—Ü)',
                'tooltip-utilities': '–ï—Å–ª–∏ —Ç—ã –ø–ª–∞—Ç–∏—à—å –≤–º–µ—Å—Ç–æ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞',
                'btn-calculate': 'üí∞ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
                'btn-clear': 'üîÑ –û—á–∏—Å—Ç–∏—Ç—å',
                'label-results': '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã',
                'results-empty': '–í–≤–µ–¥–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –Ω–∞–∂–º–∏ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å"',
                'label-history': '–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤',
                'history-empty': '–†–∞—Å—á—ë—Ç—ã –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å',
                'label-compare': '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤',
                'compare-empty': '–°–æ—Ö—Ä–∞–Ω–∏ –º–∏–Ω–∏–º—É–º 2 —Ä–∞—Å—á—ë—Ç–∞ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è',
                'label-clear-compare': 'üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å',
                'label-blog-title': '–ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã?',
                'blog-formula': '–§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ ROI –ø—Ä–∏ –∞—Ä–µ–Ω–¥–µ:',
                'blog-formula-text': '(–ß–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥ –≤ –≥–æ–¥ / –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏) √ó 100%',
                'blog-example': '–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:',
                'blog-example-text': '–ï—Å–ª–∏ –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å—Ç–æ–∏—Ç 1,500,000 ‚ÇΩ –∏ –ø—Ä–∏–Ω–æ—Å–∏—Ç 100,000 ‚ÇΩ —á–∏—Å—Ç–æ–≥–æ –¥–æ—Ö–æ–¥–∞ –≤ –≥–æ–¥, —Ç–æ:',
                'blog-example-result': 'ROI = (100,000 / 1,500,000) √ó 100% = 6.67%',
                'blog-good': '‚úÖ –≠—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ö–æ—Ä–æ—à–µ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é!',
                'blog-average': '–°—Ä–µ–¥–Ω—è—è –ø–æ –†–æ—Å—Å–∏–∏ 4-8%.',
                'label-feedback': '–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å',
                'placeholder-name': '–í–∞—à–µ –∏–º—è',
                'placeholder-email': '–í–∞—à email',
                'placeholder-message': '–í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ',
                'btn-submit': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å',
                'footer-text': 'RentCalc ¬© 2024 | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞—Ä–µ–Ω–¥—ã | –í—Å–µ —Ä–∞—Å—á—ë—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ',
                'gross-roi': '–í–∞–ª–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å',
                'net-roi': '–ß–∏—Å—Ç–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å',
                'annual-gross': '–ì–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥ (–≤–∞–ª–æ–≤–æ–π)',
                'annual-net': '–ì–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥ (—á–∏—Å—Ç—ã–π)',
                'monthly-net': '–ï–∂–µ–º–µ—Å—è—á–Ω—ã–π —á–∏—Å—Ç—ã–π –¥–æ—Ö–æ–¥',
                'payback': '–°—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏',
                'alert-success': '‚úÖ –†–∞—Å—á—ë—Ç –∑–∞–≤–µ—Ä—à—ë–Ω —É—Å–ø–µ—à–Ω–æ',
                'add-compare': '‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ',
                'remove-compare': '–£–¥–∞–ª–∏—Ç—å',
                'expenses-monthly': 'üìä –†–∞—Å—Ö–æ–¥—ã –≤ –º–µ—Å—è—Ü:',
                'expenses-total': '–ò—Ç–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–æ–≤:'
            },
            en: {
                'header-subtitle': 'Rental Income Calculator',
                'label-params': 'Calculation Parameters',
                'label-price': 'Property Purchase Price',
                'tooltip-price': 'Full property cost',
                'label-rent': 'Monthly Rent',
                'tooltip-rent': 'Income from tenant',
                'label-management': 'Building Management (per month)',
                'tooltip-management': 'Building maintenance fee',
                'label-repair': 'Repairs & Maintenance (per month)',
                'tooltip-repair': 'Preventive repairs',
                'label-taxes': 'Taxes (per month)',
                'tooltip-taxes': 'Income tax and others',
                'label-insurance': 'Insurance (per month)',
                'tooltip-insurance': 'Property insurance',
                'label-utilities': 'Utilities (per month)',
                'tooltip-utilities': 'If you pay instead of tenant',
                'btn-calculate': 'üí∞ Calculate',
                'btn-clear': 'üîÑ Clear',
                'label-results': 'Results',
                'results-empty': 'Enter parameters and click "Calculate"',
                'label-history': 'Calculation History',
                'history-empty': 'Calculations will appear here',
                'label-compare': 'Compare Variants',
                'compare-empty': 'Save at least 2 calculations to compare',
                'label-clear-compare': 'üóëÔ∏è Clear',
                'label-blog-title': 'How to Calculate Rental Income ROI?',
                'blog-formula': 'ROI Calculation Formula:',
                'blog-formula-text': '(Annual Net Income / Property Cost) √ó 100%',
                'blog-example': 'Calculation Example:',
                'blog-example-text': 'If a property costs $20,000 and generates $1,335 annual net income, then:',
                'blog-example-result': 'ROI = (1,335 / 20,000) √ó 100% = 6.67%',
                'blog-good': '‚úÖ This is considered good rental yield!',
                'blog-average': 'Average global yield is 4-8%.',
                'label-feedback': 'Feedback',
                'placeholder-name': 'Your name',
                'placeholder-email': 'Your email',
                'placeholder-message': 'Your message',
                'btn-submit': 'Submit',
                'footer-text': 'RentCalc ¬© 2024 | Rental Income Calculator | All calculations run in your browser',
                'gross-roi': 'Gross ROI',
                'net-roi': 'Net ROI',
                'annual-gross': 'Annual Income (Gross)',
                'annual-net': 'Annual Income (Net)',
                'monthly-net': 'Monthly Net Income',
                'payback': 'Payback Period',
                'alert-success': '‚úÖ Calculation completed successfully',
                'add-compare': '‚ûï Add to Comparison',
                'remove-compare': 'Remove',
                'expenses-monthly': 'üìä Monthly Expenses:',
                'expenses-total': 'Total Expenses:'
            }
        };

        let currentLanguage = localStorage.getItem('rentcalc_lang') || 'ru';
        let calculations = [];
        let comparisonItems = [];

        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('rentcalc_lang', lang);
            document.documentElement.lang = lang;
            
            // Update button states
            document.getElementById('lang-ru').classList.toggle('active', lang === 'ru');
            document.getElementById('lang-en').classList.toggle('active', lang === 'en');
            
            // Update all text content
            Object.keys(translations[lang]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[lang][key];
                }
            });

            // Update placeholders
            document.getElementById('placeholder-name').placeholder = translations[lang]['placeholder-name'];
            document.getElementById('placeholder-email').placeholder = translations[lang]['placeholder-email'];
            document.getElementById('placeholder-message').placeholder = translations[lang]['placeholder-message'];
            
            // Refresh current display
            displayHistory();
            const resultsContainer = document.getElementById('results-container');
            if (resultsContainer.children.length > 1) {
                const lastCalc = calculations[0];
                if (lastCalc) displayResults(lastCalc);
            }
        }

        function t(key) {
            return translations[currentLanguage][key] || key;
        }

        // === THEME TOGGLE ===
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.getAttribute('data-theme') !== 'light';
            const newTheme = isDark ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        }

        function updateThemeIcon(theme) {
            const icon = document.getElementById('theme-icon');
            icon.textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
        updateThemeIcon(savedTheme);

        // === CALCULATION LOGIC ===
        function getFormValues() {
            return {
                propertyPrice: parseFloat(document.getElementById('propertyPrice').value) || 0,
                monthlyRent: parseFloat(document.getElementById('monthlyRent').value) || 0,
                managementCost: parseFloat(document.getElementById('managementCost').value) || 0,
                repairCost: parseFloat(document.getElementById('repairCost').value) || 0,
                taxesCost: parseFloat(document.getElementById('taxesCost').value) || 0,
                insuranceCost: parseFloat(document.getElementById('insuranceCost').value) || 0,
                utilitiesCost: parseFloat(document.getElementById('utilitiesCost').value) || 0,
            };
        }

        function calculate() {
            const values = getFormValues();
            
            if (values.propertyPrice <= 0 || values.monthlyRent <= 0) {
                alert('‚ö†Ô∏è ' + (currentLanguage === 'ru' ? '–£–∫–∞–∂–∏ —Ü–µ–Ω—É –∏ –∞—Ä–µ–Ω–¥—É (–æ–±–∞ > 0)' : 'Enter price and rent (both > 0)'));
                return null;
            }

            const totalMonthlyExpenses = values.managementCost + values.repairCost + values.taxesCost + values.insuranceCost + values.utilitiesCost;
            const monthlyNetIncome = values.monthlyRent - totalMonthlyExpenses;
            const yearlyGrossIncome = values.monthlyRent * 12;
            const yearlyNetIncome = monthlyNetIncome * 12;
            const yearlyExpenses = totalMonthlyExpenses * 12;
            const grossROI = (yearlyGrossIncome / values.propertyPrice) * 100;
            const netROI = (yearlyNetIncome / values.propertyPrice) * 100;
            const paybackPeriod = values.propertyPrice / yearlyNetIncome;

            return {
                ...values,
                totalMonthlyExpenses,
                monthlyNetIncome,
                yearlyGrossIncome,
                yearlyNetIncome,
                yearlyExpenses,
                grossROI,
                netROI,
                paybackPeriod,
                timestamp: new Date().toLocaleString('ru-RU'),
                id: Date.now()
            };
        }

        function displayResults(calc) {
            if (!calc) return;

            const resultsHTML = `
                <div class="alert alert-success">${t('alert-success')}</div>

                <div class="results-grid">
                    <div class="result-item">
                        <div class="result-label">${t('gross-roi')}</div>
                        <div class="result-value">${calc.grossROI.toFixed(2)}%</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">${t('net-roi')}</div>
                        <div class="result-value ${calc.netROI < 0 ? 'error' : ''}">${calc.netROI.toFixed(2)}%</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">${t('annual-gross')}</div>
                        <div class="result-value" style="color: var(--warning);">${Math.round(calc.yearlyGrossIncome).toLocaleString('ru-RU')} ‚ÇΩ</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">${t('annual-net')}</div>
                        <div class="result-value ${calc.yearlyNetIncome < 0 ? 'error' : ''}">${Math.round(calc.yearlyNetIncome).toLocaleString('ru-RU')} ‚ÇΩ</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">${t('monthly-net')}</div>
                        <div class="result-value ${calc.monthlyNetIncome < 0 ? 'error' : ''}">${Math.round(calc.monthlyNetIncome).toLocaleString('ru-RU')} ‚ÇΩ</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">${t('payback')}</div>
                        <div class="result-value ${calc.paybackPeriod > 30 ? 'warning' : ''}">${calc.paybackPeriod.toFixed(1)} ${currentLanguage === 'ru' ? '–ª–µ—Ç' : 'years'}</div>
                    </div>
                </div>

                <div style="margin-top: 20px; padding: 16px; background: rgba(16, 185, 129, 0.1); border-radius: 8px;">
                    <p style="font-size: 0.9rem; margin-bottom: 8px;"><strong>${t('expenses-monthly')}</strong></p>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.8;">
                        ${currentLanguage === 'ru' ? '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: ' : 'Management: '}${Math.round(calc.managementCost).toLocaleString('ru-RU')} ‚ÇΩ | 
                        ${currentLanguage === 'ru' ? '–†–µ–º–æ–Ω—Ç: ' : 'Repairs: '}${Math.round(calc.repairCost).toLocaleString('ru-RU')} ‚ÇΩ | 
                        ${currentLanguage === 'ru' ? '–ù–∞–ª–æ–≥–∏: ' : 'Taxes: '}${Math.round(calc.taxesCost).toLocaleString('ru-RU')} ‚ÇΩ | 
                        ${currentLanguage === 'ru' ? '–°—Ç—Ä–∞—Ö–æ–≤–∫–∞: ' : 'Insurance: '}${Math.round(calc.insuranceCost).toLocaleString('ru-RU')} ‚ÇΩ
                    </div>
                    <div style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 8px;">
                        <strong>${t('expenses-total')}</strong> ${Math.round(calc.totalMonthlyExpenses).toLocaleString('ru-RU')} ‚ÇΩ / ${currentLanguage === 'ru' ? '–º–µ—Å—è—Ü' : 'month'}
                    </div>
                </div>

                <div style="margin-top: 16px;">
                    <button class="btn-secondary" onclick="addToComparison(${calc.id})" style="width: 100%;">${t('add-compare')}</button>
                </div>
            `;

            document.getElementById('results-container').innerHTML = resultsHTML;
        }

        function calculateOnButtonClick() {
            const calc = calculate();
            if (calc) {
                displayResults(calc);
                addToHistory(calc);
            }
        }

        function addToHistory(calc) {
            calculations.unshift(calc);
            if (calculations.length > 20) calculations.pop();
            localStorage.setItem('rentcalc_history', JSON.stringify(calculations));
            displayHistory();
        }

        function displayHistory() {
            if (calculations.length === 0) {
                document.getElementById('history-container').innerHTML = 
                    `<div class="no-data" style="padding: 16px;">${t('history-empty')}</div>`;
                return;
            }

            const historyHTML = calculations.map(calc => `
                <div class="history-item" onclick="loadFromHistory(${calc.id})">
                    <div class="history-item-text">
                        üè† ${Math.round(calc.propertyPrice/1000000)}M | üí∞ ${Math.round(calc.monthlyRent)}‚ÇΩ | ${calc.netROI.toFixed(1)}% ROI
                        <br><small style="opacity: 0.7;">${calc.timestamp}</small>
                    </div>
                </div>
            `).join('');

            document.getElementById('history-container').innerHTML = historyHTML;
        }

        function loadFromHistory(id) {
            const calc = calculations.find(c => c.id === id);
            if (calc) {
                document.getElementById('propertyPrice').value = calc.propertyPrice;
                document.getElementById('monthlyRent').value = calc.monthlyRent;
                document.getElementById('managementCost').value = calc.managementCost;
                document.getElementById('repairCost').value = calc.repairCost;
                document.getElementById('taxesCost').value = calc.taxesCost;
                document.getElementById('insuranceCost').value = calc.insuranceCost;
                document.getElementById('utilitiesCost').value = calc.utilitiesCost;
                displayResults(calc);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function clearForm() {
            document.getElementById('propertyPrice').value = '1500000';
            document.getElementById('monthlyRent').value = '30000';
            document.getElementById('managementCost').value = '3000';
            document.getElementById('repairCost').value = '2000';
            document.getElementById('taxesCost').value = '1500';
            document.getElementById('insuranceCost').value = '500';
            document.getElementById('utilitiesCost').value = '0';
            document.getElementById('results-container').innerHTML = 
                `<div class="no-data">${t('results-empty')}</div>`;
        }

        function addToComparison(id) {
            const calc = calculations.find(c => c.id === id);
            if (calc && !comparisonItems.find(c => c.id === id)) {
                comparisonItems.push(calc);
                if (comparisonItems.length > 3) comparisonItems.shift();
                localStorage.setItem('rentcalc_comparison', JSON.stringify(comparisonItems));
                displayComparison();
                alert('‚úÖ ' + (currentLanguage === 'ru' ? '–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ' : 'Added to comparison'));
            }
        }

        function displayComparison() {
            if (comparisonItems.length < 2) {
                document.getElementById('comparison-container').innerHTML = 
                    `<div class="no-data">${t('compare-empty')}</div>`;
                return;
            }

            const comparisonHTML = `
                <div class="comparison-grid">
                    ${comparisonItems.map(calc => `
                        <div class="comparison-card">
                            <div style="font-size: 0.9rem; line-height: 1.8;">
                                <p><strong>${currentLanguage === 'ru' ? '–¶–µ–Ω–∞: ' : 'Price: '}</strong> ${Math.round(calc.propertyPrice/1000000)}M ‚ÇΩ</p>
                                <p><strong>${currentLanguage === 'ru' ? '–ê—Ä–µ–Ω–¥–∞: ' : 'Rent: '}</strong> ${Math.round(calc.monthlyRent).toLocaleString('ru-RU')} ‚ÇΩ/–º–µ—Å</p>
                                <p><strong>${currentLanguage === 'ru' ? '–†–∞—Å—Ö–æ–¥—ã: ' : 'Expenses: '}</strong> ${Math.round(calc.totalMonthlyExpenses).toLocaleString('ru-RU')} ‚ÇΩ/–º–µ—Å</p>
                                <p><strong>${currentLanguage === 'ru' ? '–ß–∏—Å—Ç—ã–π: ' : 'Net: '}</strong> ${Math.round(calc.monthlyNetIncome).toLocaleString('ru-RU')} ‚ÇΩ/–º–µ—Å</p>
                                <p style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border-dark);">
                                    <strong style="color: var(--success);">ROI: ${calc.netROI.toFixed(2)}%</strong>
                                </p>
                            </div>
                            <button class="btn-secondary" style="width: 100%; margin-top: 12px;" onclick="removeFromComparison(${calc.id})">${t('remove-compare')}</button>
                        </div>
                    `).join('')}
                </div>
            `;

            document.getElementById('comparison-container').innerHTML = comparisonHTML;
        }

        function removeFromComparison(id) {
            comparisonItems = comparisonItems.filter(c => c.id !== id);
            localStorage.setItem('rentcalc_comparison', JSON.stringify(comparisonItems));
            displayComparison();
        }

        function clearComparison() {
            comparisonItems = [];
            localStorage.removeItem('rentcalc_comparison');
            displayComparison();
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    calculateOnButtonClick();
                }
            });

            const savedHistory = localStorage.getItem('rentcalc_history');
            if (savedHistory) {
                calculations = JSON.parse(savedHistory);
                displayHistory();
            }

            const savedComparison = localStorage.getItem('rentcalc_comparison');
            if (savedComparison) {
                comparisonItems = JSON.parse(savedComparison);
                displayComparison();
            }

            // Set initial language
            document.documentElement.lang = currentLanguage;
            document.getElementById('lang-ru').classList.toggle('active', currentLanguage === 'ru');
            document.getElementById('lang-en').classList.toggle('active', currentLanguage === 'en');
            
            // Update UI with current language
            Object.keys(translations[currentLanguage]).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        });
    </script>
</body>
</html>